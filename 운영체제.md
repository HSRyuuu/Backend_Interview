## 운영체제 란?
운영체제는 사용자가 사용하는 응용 프로그램이 효율적으로, 적절하게 동작하도록 지원합니다.   
즉, 응용 프로그램이 요청하는 시스템 리소스를 효율적으로 분배하고, 지원하는 소프트웨어 입니다.
  

## 프로세스 란?
프로세스란 컴퓨터에서 실행중인 프로그램을 의미합니다.   
실행중인 프로그램은 메모리에 올라가서 CPU에 의해 실행되고, 이런 실행 중인 프로그램을 프로세스라고 부릅니다.  
프로세스는 OS에 의해 관리되고, 프로세스마다 자신의 `주소 공간`, `메모리`, `입출력`, `파일` 등의 자원을 가지고 있습니다.  
또한, 하나의 프로그램이 여러개의 프로세스로 분리되어 실행될 수도 있습니다.

## 프로세스의 구조
프로세스는 일반적으로 `코드(text)` `데이터` `힙` `스택` 영역으로 이루어져있습니다.
- 코드 영역은 프로그램 코드가 저장되고,
- 데이터 영역은 전역 변수, 초기화된 데이터 등이 저장되며,
- 힙 영역은 코드에서 동적으로 할당된 메모리가 저장됩니다.
- 스택 영역은 함수 실행을 위한 지역 변수등이 저장됩니다.

## 컨텍스트 스위칭이란?
컨텍스트 스위칭이란 멀티 태스킹과 같이 `프로세스 스위칭`이 필요할 때, `실행할 프로세스`를 CPU에 `교체`해주는 기술입니다.  
구체적으로는 현재 실행중인 프로세스의 주요 상태정보를 해당 프로세스의 `PCB`에 저장하고,
다음에 실행할 프로세스의 PCB정보에서 주요 프로세스 상태 정보를 CPU에 업데이트한 후, 해당 프로세스를 실행시킵니다.
>**PCB**: Process Controll Block  
>프로세스가 실행중인 상태를 캡쳐, 구조화해서 저장한다. 대표적으로 PC, SP 등이 있다.
>- PC(Program Counter) : 다음에 실행할 코드 주소를 가리킨다.
>- SP(Stack Pointer) : 스택 최상단 주소를 가리킨다.

## 쓰레드 란?
쓰레드는 `프로세스 내에서 실행되는 작업의 단위`입니다.  
쓰레드는 `하나의 프로세스 내`에서 `자원을 공유`하며 동시에 실행될 수 있습니다.  
하나의 프로세스에서 여러개의 쓰레드를 생성하고 관리할 수 있으며, 각각의 쓰레드는 독립적으로 실행될 수 있습니다.  
>**멀티 쓰레드**  
> 하나의 프로세스 내에서 작업을 분리하여 여러개의 쓰레드를 병렬적으로 실행함으로써 시스템의 성능을 향상시킬 수 있습니다.
 
## 멀티 쓰레드와 멀티 프로세스의 차이점
### [개념]
**멀티 쓰레드**  
하나의 프로세스 내에서 **여러 쓰레드가 동시에 실행**되는 것을 말합니다.  
쓰레드는 프로세스 내에서 `메모리 공간을 공유`하며, `자원 접근이 간단하고 빠릅니다`.
 
**멀티 프로세스**  
여러개의 독립적인 프로세스가 동시에 실행되는 것을 말합니다.  
`각 프로세스`는 `독립된 메모리 공간`을 가지며, 자원 접근이 `상대적으로 복잡하고 느립니다`.

### [차이점]
**멀티 쓰레드**는 프로세스 주소공간을 공유하고 있기 때문에, 쓰레드간 통신을 위해 별도 기술을 사용할 필요는 없지만, 
공유한 데이터를 읽고 쓰는 과정에서 `동기화 이슈`가 발생하여, `비정상 동작`이 일어날수 있습니다.  

이에 반해 멀티 프로세스는 `IPC` 기술을 사용해서 `프로세스간 통신`을 해야 합니다.  

만약 쓰레드 간 공유한 데이터를 `읽기만 할 경우`에는 동기화 이슈를 막기 위해 동기화 기술을 쓰지 않아도 되기 때문에, 
데이터 통신을 위한 추가적인 기능 구현이 필요 없으므로, 멀티 쓰레드를 사용하는 것이 좋습니다.  

`데이터를 읽고 쓰는 작업`이 빈번하다면, 뮤텍스등 동기화 기술을 많이 사용해야 하고,  
이 경우 `데드락`과 같은 예기치 않은 비정상동작이 일어날 수 있으므로, 멀티 프로세스를 고려해보는 것이 좋습니다.

> **IPC(InterProcess Communication)**  
> 프로세스 간 통신 방법을 제공한다.  
> 다양한 IPC 기법 : `Message Queue` `Shared Memory` `Pip` 등


## 데드락(Deadlock) 이란?
데드락(Deadlock) : 교착 상태  
`멀티 쓰레드 시스템`에서 두개 이상의 쓰레드가 `상대방의 작업이 끝나기만을 기다리고` 있어서,  
다음 단계로 진행하지 못하는 상태를 말합니다.

- 데드락이 발생하면 시스템이 멈추게 되고, 해결하기 어려운 상태가 된다.
- 배치 처리 시스템에서는 일어나지 않는 문제이다.
- 프로세스, 쓰레드 둘 다 deadlock이 발생할 수 있다.

## 쓰레드 동기화와 동기화 문제 해결 기법
### [동기화]
쓰레드간 공유한 데이터를 읽고 쓸 시에, 쓰레드간 `실행 순서`에 따라 공유한 데이터를 읽고 쓰는 `작업이 누락`될 수 있으며, 
이로 인해 쓰레드의 비정상 동작을 야기할 수 있습니다.  
쓰레드 동기화란 이러한 문제를 막기 위해 `여러 쓰레드가 동시에` 공유한 데이터의 읽고, 쓰지 못하도록 하는 기술입니다.

### [뮤텍스(Mutex)]
- 공유 자원을 여러 스레드가 동시에 접근하는 것을 막습니다.
- `뮤텍스`를 소유한 쓰레드만이 임계 영역(Critical Section)에 접근할 수 있으며, 다른 쓰레드는 뮤텍스를 획득하기 위해 대기합니다.
- 임계 영역 전후로 작업 전에 mutex을 획득하고, 작업 완료 후 mutex를 반납하는 형식입니다.
  (트랜잭션의 lock와 비슷하다.)

### [세마포어(Semaphore)]
- 뮤텍스와 비슷하지만, 하나의 lock 대신에 `공유자원에 접근할 수 있는` 쓰레드의 수를 제어할 수 있습니다.
- counter를 두어서 동시에 리소스에 접근할 수 있는 `허용 가능한 쓰레드의 수를 제어`합니다.

### [뮤텍스와 세마포어의 차이점]
쓰레드 동기화 문제를 해결하기 위한 기술로,  
`뮤텍스`는 쓰레드간 공유 자원 접근 시 하나의 lock을 얻어 일정 순간에 하나의 쓰레드만 자원에 접근할 수 있도록 하는 기술이며,  
`세마포어`는 하나의 쓰레드가 아닌, 세마포어에서 정한 동시 접근 가능 쓰레드 수 만큼의 쓰레드가 공유 자원에 접근할 수 있도록 하는 기술입니다.

